<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="CAS - Enterprise Single Sign-On for the Web"/>
    <meta name="keywords" content="authentication, login, cas, central authentication service, web, java, protocol, thymeleaf,
                   open source, boot, spring, authorization, google, facebook, twitter, higher-ed, enterprise,
                   access management, single signon, sso, RBAC, ABAC, attributes, SAML, OpenID, openid connect,
                   JWT, ADFS"/>
    <meta name="robots" content="index,follow"/>

    
    

        
    


    

    <script>
        ((i, s, o, g, r, a, m) => {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-83384532-2', 'auto');
        ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>

    <link rel="stylesheet" type="text/css" media="screen" href="../../stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="print" href="../../stylesheets/print.css">

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">

    <title>CAS - WAR Overlay Initializr</title>

</head>

<body>
<!-- HEADER -->
<header class="hidden-sm-down">
    <div class="container">
        <div class="row">
            <div class="col-xs-4 col-md-2">
                <a href="../../index.html">
                    <img class="undecorated" src="../../images/cas_logo.png"/>
                </a>
            </div>
            <div class="col-xs-8 col-md-6">
                <h1>Enterprise Single Sign-On for All</h1>
            </div>
            <div class="hidden-sm-down col-md-4">
                <a id="forkme_banner" href="https://github.com/apereo/cas">View on GitHub</a>
            </div>

        </div>
    </div>
</header>

<!-- NAVBAR -->

<nav class="navbar navbar-expand-md navbar-dark bg-primary bg-dark">
    <div class="container">
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse collapse" id="navbarsExample04">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active"><a href="../../index.html" class="zoom nav-link">Home</a></li>
                <li class="nav-item"><a href="https://github.com/apereo/cas/releases" class="zoom nav-link">Releases</a></li>
                <li class="nav-item"><a href="../../Support.html" class="zoom nav-link">Support</a></li>
                <li class="nav-item"><a href="../../Mailing-Lists.html" class="zoom nav-link">Mailing Lists</a></li>
                <li class="nav-item">
                    <a class="zoom nav-link" href="../../Demos.html">Demos</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="zoom nav-link dropdown-toggle mr-md-2" href="#" id="cas-versions" data-bs-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">Versions</a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="cas-versions">
                        
                        
                        <a class="dropdown-item" href="/cas/development/">Development</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.6.x/">v6.6.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.5.x/">v6.5.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.4.x/">v6.4.x</a>
                        
                        

                    </div>
                </li>
                <li class="nav-item"><a href="https://apereo.github.io" target="_blank" class="zoom nav-link">Blog</a></li>
            </ul>

        </div>

    </div>
</nav>


<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar pb-5" id="sidebar"></div>


        <div class="d-none d-xl-block col-xl-2 docs-toc">
    <div id="pageContents">
        <ul class="section-nav"></ul>
    </div>
</div>


        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 cas-docs-content" role="main">


            

            <section>
                <nav id="docsNavBar">
                    <span id="toolbarIcons"></span>
                </nav>

                <div id="cas-docs-container">
                    
<h1 id="war-overlay-initializr">WAR Overlay Initializr</h1>

<p><a href="https://casinit.herokuapp.com/">Apereo CAS Initializr</a> is a relatively new addition to the Apereo CAS ecosystem that allows
you as the deployer to generate CAS WAR Overlay projects on the fly with just what you need to start quickly.</p>

<p>To get started with a CAS deployment, adopters typically
start with <a href="WAR-Overlay-Installation.html">a plain Gradle-based overlay project</a>
and use that as a baseline for future modifications. While this has been the traditional and recommended
approach for many years, it can also be rather challenging for a relatively-novice user new to the
ecosystem to download, modify and prepare an overlay project to include all required
customizations. Given the overlay project’s static nature, it can also be challenging for
project owners and maintainers to keep it up-to-date or offer additional enhancements
and automation without affecting the baseline template.</p>

<p>To address such scenarios, the <a href="https://casinit.herokuapp.com/">CAS WAR Overlay Initializr</a> offers a fast way to pull
in all the dependencies and modules needed for a CAS deployment and
provides friendly and programmatic curl-friendly API to generate
an overlay structure and required build files.</p>

<p>The underlying framework that handles the project generation
task is based on <a href="https://github.com/spring-io/initializr">Spring Initializr</a>.</p>

<h2 id="overview">Overview</h2>

<p>The CAS Initializr can dynamically generate a starting project based on
requested modules and dependencies needed for a deployment. This behavior
can be tailored to the user’s experience based on that input and the
conditions that follow to generate additional references, files, starting
templates, and more in the same project to make the deployment process more comfortable.</p>

<p>CAS Initializr at this point is mainly a backend service and a few APIs.
However, one could imagine that a graphical and modern user interface
could be built on top of available APIs to help with the project
generation task, especially for project newcomers.</p>

<p>Managing and maintaining a separate overlay projects and keeping them
in sync with various CAS versions can be a costly maintenance task.
CAS Initializr allows the project developers to automate the
maintenance task, keep everything in the same repository
for faster and more accurate upgrades.</p>

<p>CAS Initializr is used internally by the CAS project itself in a
very <em>Eat What You Kill</em> type of way to dynamically generate
overlay projects. These generated projects are used as CAS base
Docker images published to Docker Hub, and as a baseline for
browser/UI tests run by the CAS CI for each relevant feature.
CAS Initializr uses itself to test itself!</p>

<p>To properly initialize and generate a CAS overlay, you may want to make
sure you have <code class="language-plaintext highlighter-rouge">curl</code>, <code class="language-plaintext highlighter-rouge">http</code> and/or <a href="https://stedolan.github.io/jq/">jq</a> installed.</p>

<h2 id="project-types">Project Types</h2>

<p>The <a href="https://casinit.herokuapp.com/">CAS Initializr</a> can be invoked using curl to generate different types of overlay projects.
The project selection is indicated using a <code class="language-plaintext highlighter-rouge">type</code> parameter. The following types are supported:</p>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cas-overlay</code></td>
      <td>Default; generates a <a href="../installation/WAR-Overlay-Installation.html">CAS WAR overlay</a>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cas-bootadmin-server-overlay</code></td>
      <td>Generates a WAR Overlay for the <a href="../monitoring/Configuring-Monitoring-Administration.html">Spring Boot Admin Server</a>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cas-config-server-overlay</code></td>
      <td>Generates a WAR Overlay for the <a href="../configuration/Configuration-Server-Management.html">Spring Cloud Configuration Server</a>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cas-discovery-server-overlay</code></td>
      <td>Generates a WAR Overlay for the <a href="../installation/Service-Discovery-Guide-Eureka.html">Service Discovery Server</a>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cas-management-overlay</code></td>
      <td>Generates a WAR Overlay for the <a href="../services/Installing-ServicesMgmt-Webapp.html">CAS Management Web Application</a>.</td>
    </tr>
  </tbody>
</table>

<h2 id="project-versions">Project Versions</h2>

<p>The <a href="https://casinit.herokuapp.com/">CAS Initializr</a> can be instructed to prepare an overlay project for a specific version.
The following request parameters control the version selection:</p>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">casVersion</code></td>
      <td>Specify the CAS version for the overlay.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">bootVersion</code></td>
      <td>Specify the Spring Boot version for the overlay.</td>
    </tr>
  </tbody>
</table>

<p>Note that mixing and matching different versions generally will lead to 
unstable projects builds. Do so at your own risk! The specification
of version numbers in the project generation request is unnecessary, and <a href="https://casinit.herokuapp.com/">CAS Initializr</a> will always
use trusted defaults to handle the generation task.</p>

<p>To review the list of supported versions for the CAS Initializr on <a href="https://casinit.herokuapp.com/">Heroku</a>, you may use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>curl https://casinit.herokuapp.com/actuator/supportedVersions | jq
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="source-code">Source Code</h2>

<p><a href="https://casinit.herokuapp.com/">CAS Initializr</a> is available at:</p>

<table>
  <thead>
    <tr>
      <th>Source Repository</th>
      <th>Location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">https://github.com/apereo/cas-initializr</code></td>
      <td><a href="https://casinit.herokuapp.com">Link</a></td>
    </tr>
  </tbody>
</table>

<h2 id="project-generation">Project Generation</h2>

<p>The <a href="https://casinit.herokuapp.com/">CAS Initializr</a> can be invoked using curl to generate an overlay project. To access
the CAS Initializr, the following strategies can be used.</p>

<h3 id="heroku">Heroku</h3>

<p>The CAS projects provides a public <strong>free</strong> instance of the CAS Initializr on <a href="https://casinit.herokuapp.com/">Heroku</a>, paid for by the
Apereo CAS support subscribers. To get started with this instance, a simple way might be to include the following function in your bash profile:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre></td><td class="rouge-code"><pre><span class="k">function </span>getcas<span class="o">(){</span>
  <span class="nv">url</span><span class="o">=</span><span class="s2">"https://casinit.herokuapp.com/starter.tgz"</span>
  <span class="nv">projectType</span><span class="o">=</span><span class="s2">"cas-overlay"</span>
  <span class="nv">dependencies</span><span class="o">=</span><span class="s2">""</span>
  <span class="nv">directory</span><span class="o">=</span><span class="s2">"overlay"</span>
  <span class="k">for </span>arg <span class="k">in</span> <span class="nv">$@</span><span class="p">;</span> <span class="k">do
    case</span> <span class="s2">"</span><span class="nv">$arg</span><span class="s2">"</span> <span class="k">in</span>
    <span class="nt">--url</span><span class="p">|</span><span class="nt">-u</span><span class="p">)</span>
      <span class="nv">url</span><span class="o">=</span><span class="nv">$2</span>
      <span class="nb">shift </span>1
      <span class="p">;;</span>
    <span class="nt">--type</span><span class="p">|</span><span class="nt">-t</span><span class="p">)</span>
      <span class="nv">projectType</span><span class="o">=</span><span class="nv">$2</span>
      <span class="nb">shift </span>1
      <span class="p">;;</span>
    <span class="nt">--directory</span><span class="p">|</span><span class="nt">--dir</span><span class="p">|</span><span class="nt">-d</span><span class="p">)</span>
      <span class="nv">directory</span><span class="o">=</span><span class="nv">$2</span>
      <span class="nb">shift </span>1
      <span class="p">;;</span>
    <span class="nt">--casVersion</span><span class="p">|</span><span class="nt">--cas</span><span class="p">)</span>
      <span class="nv">casVersion</span><span class="o">=</span><span class="s2">"-d casVersion=</span><span class="nv">$2</span><span class="s2">"</span>
      <span class="nb">shift </span>1
      <span class="p">;;</span>
    <span class="nt">--bootVersion</span><span class="p">|</span><span class="nt">--springBootVersion</span><span class="p">|</span><span class="nt">--boot</span><span class="p">)</span>
      <span class="nv">bootVersion</span><span class="o">=</span><span class="s2">"-d bootVersion=</span><span class="nv">$2</span><span class="s2">"</span>
      <span class="nb">shift </span>1
      <span class="p">;;</span>
    <span class="nt">--modules</span><span class="p">|</span><span class="nt">--dependencies</span><span class="p">|</span><span class="nt">--extensions</span><span class="p">|</span><span class="nt">-m</span><span class="p">)</span>
      <span class="nv">dependencies</span><span class="o">=</span><span class="s2">"-d dependencies=</span><span class="nv">$2</span><span class="s2">"</span>
      <span class="nb">shift </span>1
      <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span>
      <span class="nb">shift</span>
      <span class="p">;;</span>
    <span class="k">esac</span>
  <span class="k">done
  </span><span class="nb">rm</span> <span class="nt">-Rf</span> ./<span class="k">${</span><span class="nv">directory</span><span class="k">}</span>
  <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"Generating project </span><span class="k">${</span><span class="nv">projectType</span><span class="k">}</span><span class="s2"> with dependencies </span><span class="k">${</span><span class="nv">dependencies</span><span class="k">}</span><span class="s2">..."</span>
  <span class="nv">cmd</span><span class="o">=</span><span class="s2">"curl </span><span class="k">${</span><span class="nv">url</span><span class="k">}</span><span class="s2"> -d type=</span><span class="k">${</span><span class="nv">projectType</span><span class="k">}</span><span class="s2"> -d baseDir=</span><span class="k">${</span><span class="nv">directory</span><span class="k">}</span><span class="s2"> </span><span class="k">${</span><span class="nv">dependencies</span><span class="k">}</span><span class="s2"> </span><span class="k">${</span><span class="nv">casVersion</span><span class="k">}</span><span class="s2"> </span><span class="k">${</span><span class="nv">bootVersion</span><span class="k">}</span><span class="s2"> | tar -xzvf -"</span>
  <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">cmd</span><span class="k">}</span><span class="s2">"</span>
  <span class="nb">eval</span> <span class="s2">"</span><span class="k">${</span><span class="nv">cmd</span><span class="k">}</span><span class="s2">"</span>
  <span class="nb">ls</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="alert alert-info"><strong>Note</strong><p>
If you prefer, you could invoke the <code>/starter.zip</code> endpoint to get back a ZIP file instead.
</p></div>

<p>This allows you to generate a CAS overlay project in the <code class="language-plaintext highlighter-rouge">overlay</code> directory using:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>getcas <span class="nt">--modules</span> duo,oidc
</pre></td></tr></tbody></table></code></pre></div></div>

<p>…which generates a CAS overlay project prepared with multifactor authentication
by <a href="../mfa/DuoSecurity-Authentication.html">Duo Security</a> and
support for <a href="../authentication/OAuth-Authentication.html">OpenID Connect</a>.</p>

<div class="alert alert-info"><strong>Note</strong>
<p>To help keep the deployment costs down, the Heroku instance has turned on support for
rate-limiting requests. Be aware that frequent requests may be throttled for access.</p></div>

<h3 id="docker">Docker</h3>

<p>In case the Initializr is not available on Heroku, you can also run your own Initializr instance via Docker:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>docker run <span class="nt">--rm</span> <span class="nt">-p</span> 8080:8080 apereo/cas-initializr:<span class="k">${</span><span class="nv">tag</span><span class="k">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The CAS Initializr should become available at <code class="language-plaintext highlighter-rouge">http://localhost:8080</code> and will respond to API
requests using curl. Published images and tags of
the CAS Initializr <a href="https://hub.docker.com/r/apereo/cas-initializr/tags">can be found here</a>.</p>

<h2 id="cas-modules">CAS Modules</h2>

<p>CAS project modules and dependencies that can be requested must be specified by
their identifier. To see a full list of all dependencies supported and
available by this service, you can invoke the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>curl https://casinit.herokuapp.com/dependencies
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Typically, dependency identifiers match CAS server dependency/module artifact names without
the <code class="language-plaintext highlighter-rouge">cas-server-</code> prefix. Furthermore, certain dependencies are assigned aliases as
shortcuts to simplify requests. To see the full list of dependencies and their aliases, you may use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>curl https://casinit.herokuapp.com/actuator/info | jq
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Furthermore, CAS Initializr publishes metadata about its capabilities, that is the
available options for all request parameters (dependencies, type, etc.) A client to the
service uses that information to initialize the select options and the tree of available dependencies.</p>

<p>You can grab the metadata on the root endpoint with the appropriate <code class="language-plaintext highlighter-rouge">Accept</code> header:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>curl <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span> https://casinit.herokuapp.com | jq
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Or using HTTPie:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>http https://casinit.herokuapp.com Accept:application/json | jq
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="dependency-management">Dependency Management</h3>

<p>CAS Initializr is set to use the <a href="BOM-Dependency-Management.html">CAS BOM</a> for dependency management.</p>

<h2 id="contributions">Contributions</h2>

<p>Please see <a href="../developer/Build-Process.html">this guide</a> for more details.</p>


                </div>
            </section>
        </main>
    </div>
</div>


<footer>
    <div class="container">
        CAS is supported by the <a href="https://www.apereo.org/">Apereo Foundation</a>.
    </div>
</footer>

<script>
    let pageSection = 'Installation';
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

<script src="../../javascripts/URI.js"></script>
<script src="../../javascripts/main.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</body>

</html>
