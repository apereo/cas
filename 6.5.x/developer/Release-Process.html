<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="CAS - Enterprise Single Sign-On for the Web"/>
    <meta name="keywords" content="authentication, login, cas, central authentication service, web, java, protocol, thymeleaf,
                   open source, boot, spring, authorization, google, facebook, twitter, higher-ed, enterprise,
                   access management, single signon, sso, RBAC, ABAC, attributes, SAML, OpenID, openid connect,
                   JWT, ADFS"/>
    <meta name="robots" content="index,follow"/>

    
    

        
    


    

    <script>
        ((i, s, o, g, r, a, m) => {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-83384532-2', 'auto');
        ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>

    <link rel="stylesheet" type="text/css" media="screen" href="../../stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="print" href="../../stylesheets/print.css">

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">

    <title>CAS - Release Process</title>

</head>

<body>
<!-- HEADER -->
<header class="hidden-sm-down">
    <div class="container">
        <div class="row">
            <div class="col-xs-4 col-md-2">
                <a href="../../index.html">
                    <img class="undecorated" src="../../images/cas_logo.png"/>
                </a>
            </div>
            <div class="col-xs-8 col-md-6">
                <h1>Enterprise Single Sign-On for All</h1>
            </div>
            <div class="hidden-sm-down col-md-4">
                <a id="forkme_banner" href="https://github.com/apereo/cas">View on GitHub</a>
            </div>

        </div>
    </div>
</header>

<!-- NAVBAR -->

<nav class="navbar navbar-expand-md navbar-dark bg-primary bg-dark">
    <div class="container">
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse collapse" id="navbarsExample04">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active"><a href="../../index.html" class="zoom nav-link">Home</a></li>
                <li class="nav-item"><a href="https://github.com/apereo/cas/releases" class="zoom nav-link">Releases</a></li>
                <li class="nav-item"><a href="../../Support.html" class="zoom nav-link">Support</a></li>
                <li class="nav-item"><a href="../../Mailing-Lists.html" class="zoom nav-link">Mailing Lists</a></li>
                <li class="nav-item">
                    <a class="zoom nav-link" href="../../Demos.html">Demos</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="zoom nav-link dropdown-toggle mr-md-2" href="#" id="cas-versions" data-bs-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">Versions</a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="cas-versions">
                        
                        
                        <a class="dropdown-item" href="/cas/development/">Development</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.6.x/">v6.6.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.5.x/">v6.5.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.4.x/">v6.4.x</a>
                        
                        

                    </div>
                </li>
                <li class="nav-item"><a href="https://apereo.github.io" target="_blank" class="zoom nav-link">Blog</a></li>
            </ul>

        </div>

    </div>
</nav>


<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar pb-5" id="sidebar"></div>


        <div class="d-none d-xl-block col-xl-2 docs-toc">
    <div id="pageContents">
        <ul class="section-nav"></ul>
    </div>
</div>


        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 cas-docs-content" role="main">


            

            <section>
                <nav id="docsNavBar">
                    <span id="toolbarIcons"></span>
                </nav>

                <div id="cas-docs-container">
                    
<h1 id="cas-release-process">CAS Release Process</h1>

<p>This page documents the steps that a release engineer should take for cutting a CAS server release.</p>

<h2 id="sonatype-setup">Sonatype Setup</h2>

<p>You will need to sign up for a <a href="https://central.sonatype.org/pages/ossrh-guide.html">Sonatype account</a> and must ask 
to be authorized to publish releases to the <code class="language-plaintext highlighter-rouge">org.apereo</code> package by creating a JIRA. Once you have, you may be asked to have one of the
current project members <em>vouch</em> for you.</p>

<h2 id="gpg-setup">GPG Setup</h2>

<p>You will need to <a href="https://blog.sonatype.com/2010/01/how-to-generate-pgp-signatures-with-maven/">generate your own PGP signatures</a> to 
sign the release artifacts prior to uploading them to a central repository. In order to create OpenPGP signatures, you will 
need to generate a key pair. You need to provide the build with your key information, which means three things:</p>

<ul>
  <li>The public key ID (The last 8 symbols of the keyId. You can use <code class="language-plaintext highlighter-rouge">gpg -K</code> to get it).</li>
  <li>The absolute path to the secret key ring file containing your private key. Since gpg 2.1, you need to export the keys with command:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>gpg <span class="nt">--keyring</span> secring.gpg <span class="nt">--export-secret-keys</span> <span class="o">&gt;</span> ~/.gnupg/secring.gpg
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>The passphrase used to protect your private key.</li>
</ul>

<p>The above settings will need to be placed into the <code class="language-plaintext highlighter-rouge">~/.gradle/gradle.properties</code> file:</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="py">signing.keyId</span><span class="p">=</span><span class="s">7A24P9QB</span>
<span class="py">signing.password</span><span class="p">=</span><span class="s">P@$$w0rd</span>
<span class="py">signing.secretKeyRingFile</span><span class="p">=</span><span class="s">/Users/example/.gnupg/secring.gpg</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Additional notes on how artifacts are signed using the Gradle 
signing plugin are <a href="https://docs.gradle.org/current/userguide/signing_plugin.html">available here</a></p>

<h2 id="environment-setup">Environment Setup</h2>

<ul>
  <li>Load your SSH key and ensure this SSH key is also referenced in GitHub.</li>
  <li>Adjust <code class="language-plaintext highlighter-rouge">$GRADLE_OPTS</code> to initialize the JVM heap size, if necessary.</li>
  <li>Load your <code class="language-plaintext highlighter-rouge">~/.gradle/gradle.properties</code> file with the following <em>as an example</em>:</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="py">org.gradle.daemon</span><span class="p">=</span><span class="s">false</span>
<span class="py">org.gradle.parallel</span><span class="p">=</span><span class="s">false</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Checkout the CAS project: <code class="language-plaintext highlighter-rouge">git clone git@github.com:apereo/cas.git cas-server</code></li>
  <li>Make sure you have the <a href="https://openjdk.java.net/projects/jdk/11/">latest version of JDK 11</a> installed via <code class="language-plaintext highlighter-rouge">java -version</code>.</li>
</ul>

<h2 id="preparing-the-release">Preparing the Release</h2>

<p>Apply the following steps to prepare the release environment. There are a few variations to take into account depending on whether
a new release branch should be created.</p>

<h3 id="create-branch">Create Branch</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c"># Replace $BRANCH with CAS version (i.e. 5.3.x)</span>
git checkout <span class="nt">-b</span> <span class="nv">$BRANCH</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="alert alert-warning"><strong>Remember</strong><p>You should do this only for major or minor 
releases (i.e. <code>4.2.x</code>, <code>5.0.x</code>).
If there already exists a remote tracking branch for the version you are about to release, you should <code>git checkout</code> that branch, 
skip this step and move on to next section to build and release.</p></div>

<h3 id="github-actions">GitHub Actions</h3>

<div class="alert alert-warning"><strong>Remember</strong><p>You should do this only for major or minor 
releases, when new branches are created.</p></div>

<p>Change GitHub Actions workflows to trigger and <em>only</em> build the newly-created release branch:</p>

<ul>
  <li>Modify the <code class="language-plaintext highlighter-rouge">analysis.yml</code> workflow to run on the newly-created branch. Disable <code class="language-plaintext highlighter-rouge">spotBugsMain</code>, <code class="language-plaintext highlighter-rouge">spotBugsTest</code> and <code class="language-plaintext highlighter-rouge">checkLicense</code> tasks.</li>
  <li>Modify the <code class="language-plaintext highlighter-rouge">validation.yml</code> workflow to run on the newly-created branch.</li>
  <li>Modify the <code class="language-plaintext highlighter-rouge">build.yml</code> workflow to run on the newly-created branch, and only on Ubuntu. Disable the job to skip building on the latest JDK.</li>
  <li>Modify the <code class="language-plaintext highlighter-rouge">publish.yml</code> workflow to run on the newly-created branch, and change the “Publish Documentation” parameter to point to the newly-created branch.</li>
</ul>

<p>Do not forget to commit all changes and push changes upstream, creating a new remote branch to track the release.</p>

<h2 id="performing-the-release">Performing the Release</h2>

<ul>
  <li>In the project’s <code class="language-plaintext highlighter-rouge">gradle.properties</code>, change the project version to the release version and remove the <code class="language-plaintext highlighter-rouge">-SNAPSHOT</code>. (i.e. <code class="language-plaintext highlighter-rouge">6.0.0-RC1</code>).</li>
  <li>Build and release the project using the following command:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>./release.sh
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="finalizing-the-release">Finalizing the Release</h2>

<ul>
  <li>Create a tag for the released version, commit the change and push the tag to the upstream repository. (i.e. <code class="language-plaintext highlighter-rouge">v5.0.0-RC1</code>).</li>
</ul>

<p>You should also switch back to the main development branch (i.e. <code class="language-plaintext highlighter-rouge">master</code>) and follow these steps:</p>

<ul>
  <li>In the project’s <code class="language-plaintext highlighter-rouge">gradle.properties</code>, change the project version to the <em>next</em> development version (i.e. <code class="language-plaintext highlighter-rouge">5.0.0-SNAPSHOT</code>).</li>
  <li>Push your changes to the upstream repository.</li>
</ul>

<h2 id="housekeeping">Housekeeping</h2>

<div class="alert alert-info"><strong>Remember</strong><p>When updating the release description, try to be keep 
consistent and follow the same layout as previous releases.</p></div>

<p>Remember to mark the release tag as pre-release, when releasing RC versions of the project on GitHub.</p>

<h2 id="update-cas-initializr">Update CAS Initializr</h2>

<p>Make sure to update the <a href="../installation/WAR-Overlay-Initializr.html">CAS Initializr</a> to allow for generation of projects
based on the newly-released version.</p>

<h2 id="update-documentation">Update Documentation</h2>

<div class="alert alert-warning"><strong>Remember</strong><p>You should do this only for major or minor releases, when new branches are created.</p></div>

<ul>
  <li>Configure docs to point <code class="language-plaintext highlighter-rouge">current</code> to the latest available version <a href="https://github.com/apereo/cas/blob/gh-pages/current/index.html">here</a>.</li>
  <li>Modify the <code class="language-plaintext highlighter-rouge">cas-server-documentation/cas-config.yml</code> file to exclude relevant branches and directories from the build.</li>
  <li>Configure docs to include the new release in the list of <a href="https://github.com/apereo/cas/blob/gh-pages/_layouts/default.html">available versions</a>.</li>
  <li>Update the project’s <a href="https://github.com/apereo/cas/blob/master/README.md"><code class="language-plaintext highlighter-rouge">README.md</code> page</a> to list the new version, if necessary.</li>
  <li>Update <a href="Build-Process.html">the build process</a> to include any needed information on how to build the new release.</li>
  <li>Update <a href="../release_notes/Overview.html">the release notes</a> and remove all previous entries.</li>
  <li>Send a pull request to <a href="https://github.com/algolia/docsearch-configs/blob/master/configs/apereo.json">Algolia</a> for the new documentation version to index the new space for search requests.</li>
</ul>

<h2 id="update-maintenance-policy">Update Maintenance Policy</h2>

<div class="alert alert-warning"><strong>Remember</strong><p>You should do this only for major or minor releases, when new branches are created.</p></div>

<p>Update the <a href="https://github.com/apereo/cas/edit/gh-pages/developer/Maintenance-Policy.md/">Maintenance Policy</a> to note 
the release schedule and EOL timeline.</p>

<h2 id="update-demos">Update Demos</h2>

<p>(Optional) A number of CAS demos today run on Heroku and are tracked in dedicated 
branches inside the codebase. Take a pass and update each, when relevant.</p>

                </div>
            </section>
        </main>
    </div>
</div>


<footer>
    <div class="container">
        CAS is supported by the <a href="https://www.apereo.org/">Apereo Foundation</a>.
    </div>
</footer>

<script>
    let pageSection = 'Developer';
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

<script src="../../javascripts/URI.js"></script>
<script src="../../javascripts/main.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</body>

</html>
