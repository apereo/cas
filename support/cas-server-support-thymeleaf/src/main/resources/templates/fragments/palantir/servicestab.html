<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
</head>
<body>
<span th:fragment="main">
    <div class="attribute-tab w-100 mdc-data-table table-responsive noborder" id="attribute-tab-0">

        <div class="jqueryui-tabs">
              <ul>
                <li><a id="applications" href="#applications-tab">Applications</a></li>
                <li><a id="saml2metadataproviders" href="#saml2metadataproviders-tab" class="hide">SAML2 Metadata Sources</a></li>
              </ul>

            <div id="applications-tab">

                <table id="applicationsTable" class="mdc-data-table__table table table-striped noborder">
                    <thead>
                    <tr class="mdc-data-table__header-row">
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col"></th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Service</th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">URL</th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Description</th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col"></th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col"></th>
                    </tr>
                    </thead>
                    <tbody class="mdc-data-table__content">
                    </tbody>
                </table>

                <div width="10%">
                    <div class="mdc-touch-target-wrapper">
                        <span class="mdc-menu-surface--anchor">
                            <button name="newService" id="newService"
                                    onclick="cas.openMenu();"
                                    class="mdc-button mdc-button--raised" aria-label="Create">
                                <span class="mdc-button__label"><i class="mdc-tab__icon mdi mdi-plus" aria-hidden="true"></i>New</span>
                            </button>
                            <div class="mdc-menu mdc-menu-surface" style="min-width: max(500px, 50%);)">
                                <ul class="mdc-list" aria-orientation="vertical"  role="menu" aria-hidden="true" tabindex="-1">
                                    <li class="mdc-list-item pb-3" role="menuitem">
                                        <span class="mdc-list-item__ripple"></span>
                                        <i class="mdi mdi-pencil fas fa-pencil" style="margin-top: 2px;" aria-hidden="true"></i>
                                        <div class="text-justify">
                                            <h3>Editor</h3>
                                            <span>Create a service definition using a plain-text editor where you can directly
                                                modify the service definition or copy-paste it into the editor from elsewhere.</span>
                                            <p></p>
                                            <button name="newServicePlain" id="newServicePlain" class="mdc-button mdc-button--raised"
                                                    aria-label="Create">
                                                <span class="mdc-button__label"><i class="mdc-tab__icon mdi mdi-plus"
                                                                                   aria-hidden="true"></i>Proceed</span>
                                            </button>
                                        </div>
                                    </li>

                                    <li class="mdc-list-item pb-3" role="menuitem" style="margin-top: 10px;">
                                        <span class="mdc-list-item__ripple"></span>
                                        <i class="mdi mdi-wizard-hat" aria-hidden="true"></i>
                                        <div class="text-justify">
                                            <h3 style="margin-top: 2px;">Wizard</h3>
                                            <span>Create a service definition using a step-by-step wizard and form editor, allowing
                                                you to modify individual settings and policies without prior knowledge of
                                                the internal service definition model.</span>
                                            <p></p>
                                            <button name="newServiceWizard" id="newServiceWizard"
                                                    class="mdc-button mdc-button--raised"
                                                    style="margin-bottom: 2px;"
                                                    aria-label="Create">
                                                <span class="mdc-button__label"><i class="mdc-tab__icon mdi mdi-plus"
                                                                                   aria-hidden="true"></i>Proceed</span>
                                            </button>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </span>
                        <input type="file" id="serviceFileInput" style="display: none;">
                        <button name="importService" id="importService" class="mdc-button mdc-button--raised"
                                aria-label="Import">
                             <span class="mdc-button__label"><i class="mdc-tab__icon mdi mdi-file-import"
                                                                aria-hidden="true"></i>Import</span>
                        </button>
                        <button name="exportAll" id="exportAll" class="mdc-button mdc-button--raised"
                                aria-label="Export All">
                             <span class="mdc-button__label"><i class="mdc-tab__icon mdi mdi-file-export"
                                                                aria-hidden="true"></i>Export</span>
                        </button>
                        <button name="reloadAll" id="reloadAll" class="mdc-button mdc-button--raised"
                                aria-label="Reload"
                                onclick="fetchServices();">
                             <span class="mdc-button__label"><i class="mdc-tab__icon mdi mdi-refresh"
                                                                aria-hidden="true"></i>Reload</span>
                        </button>
                    </div>
                </div>
                <div class="mw-20">
                  <canvas id="servicesChart"></canvas>
                </div>

                <div class="mdc-dialog modal" id="editServiceWizardDialog" role="alertdialog"
                     aria-modal="true" aria-labelledby="edit-service-dialog-title" aria-describedby="dialog-content">
                    <div class="mdc-dialog__container w-100 modal-dialog" style="max-height: 70%">
                        <div class="mdc-dialog__surface mw-100 w-75 modal-content min-height-60">
                            <div class="mdc-dialog__content modal-body" id="edit-service-wizard-dialog-content">

                                <div class="p-4 banner banner-warning"><h4>
                                    The wizard-based service editor is a work in progress and not all features are supported yet.
                                    Tread lightly and consider using the plain-text editor for production use cases.
                                    Verify with release notes for updates on the wizard functionality and feel free to contribute!
                                </h4></div>
                                <p>The following application type is chosen:</p>
                                <pre><code id="serviceClassType" class="border-rounded language-html"></code></pre>

                                 <div id="editServiceWizardMenu" class="jqueryui-accordion">
                                      <h3>General</h3>
                                      <div id="editServiceWizardMenuItemGeneral">
                                          <p>This section defines basic properties and settings that can be assigned to an application.</p>
                                          
                                          <div id="editServiceWizardGeneralContainer" class="mdc-input-group-field mdc-input-group-field-append w-100">
                                            <script type="text/javascript">
                                                createInputField("Name", "registeredServiceName", "name", true, "editServiceWizardGeneralContainer",
                                                    "Define a logical name for this application, preferably without spaces or special characters.")
                                                    .on("input", generateServiceDefinition)
                                                    .append($("<sub>").text(" (Required)"));
                                                createInputField("Service ID", "registeredServiceId", "serviceId", true, "editServiceWizardGeneralContainer",
                                                    "Define a service identifier that determines which requests are mapped to this application. This is typically a URL pattern or regular expression.")
                                                    .on("input", generateServiceDefinition);
                                                createInputField("Description", "registeredServiceDescription", "description", false, "editServiceWizardGeneralContainer",
                                                    "Provide a brief description of the application.")
                                                    .on("input", generateServiceDefinition);
                                                createInputField("Numeric Id", "registeredServiceIdentifier", "id", false, "editServiceWizardGeneralContainer",
                                                    "Define a unique numeric identifier for this application.")
                                                    .on("input", generateServiceDefinition)
                                                    .attr("type", "number");
                                                createInputField("Theme", "registeredServiceTheme", "theme", false, "editServiceWizardGeneralContainer",
                                                    "Specify a theme to customize the appearance of the login and other user interface pages for this application.")
                                                    .on("input", generateServiceDefinition);
                                                createInputField("Locale", "registeredServiceLocale", "locale", false, "editServiceWizardGeneralContainer",
                                                    "Specify a locale to customize the language and regional settings for this application.")
                                                    .on("input", generateServiceDefinition);
                                                createInputField("Information URL", "registeredServiceInformationUrl", "informationUrl", false, "editServiceWizardGeneralContainer",
                                                    "Provide a URL that points to more information about this application.")
                                                    .on("input", generateServiceDefinition);
                                                createInputField("Privacy URL", "registeredServicePrivacyUrl", "privacyUrl", false, "editServiceWizardGeneralContainer",
                                                    "Provide a URL that points to the privacy policy for this application.")
                                                    .on("input", generateServiceDefinition);
                                                createInputField("Template", "registeredServiceTemplate", "templateName", false, "editServiceWizardGeneralContainer",
                                                    "Specify a template name to apply predefined settings and configurations for this application.")
                                                    .on("input", generateServiceDefinition);
                                                createInputField("Evaluation Order", "registeredServiceEvaluationOrder", "evaluationOrder", false, "editServiceWizardGeneralContainer",
                                                    "Define the order in which this application is evaluated relative to other applications. Lower numbers indicate higher priority.")
                                                    .on("input", generateServiceDefinition)
                                                    .attr("type", "number");
                                                createInputField("Logo", "registeredServiceEvaluationLogo", "logo", false, "editServiceWizardGeneralContainer",
                                                    "Provide a URL to a logo image that represents this application.")
                                                    .on("input", generateServiceDefinition);
                                                createInputField("Logout URL", "registeredServiceEvaluationLogoutUrl", "logoutUrl", false, "editServiceWizardGeneralContainer",
                                                    "Specify a URL to redirect users to upon logout from this application.")
                                                    .on("input", generateServiceDefinition);
                                            </script>
                                          </div>
                                      </div>
                                      <h3>Expiration Policy</h3>
                                      <div id="editServiceWizardMenuItemExpirationPolicy">
                                          <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                      <h3>Ticket-Granting Ticket Expiration Policy</h3>
                                      <div id="editServiceWizardMenuItemTGTExpirationPolicy">
                                         <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                      <h3>Username Attribute Provider</h3>
                                      <div id="editServiceWizardMenuItemUsernameAttribute">
                                        <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                     <h3>Attribute Release Policy</h3>
                                      <div id="editServiceWizardMenuItemAttributeReleasePolicy">
                                        <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                     <h3>Multifactor Authentication Policy</h3>
                                      <div id="editServiceWizardMenuItemMfaPolicy">
                                        <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                     <h3>Matching Strategy</h3>
                                      <div id="editServiceWizardMenuItemMatchingStrategy">
                                        <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                     <h3>Access Strategy</h3>
                                      <div id="editServiceWizardMenuItemAccessStrategy">
                                        <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                     <h3>Authentication Policy</h3>
                                      <div id="editServiceWizardMenuItemAuthenticationPolicy">
                                        <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                     <h3>Properties</h3>
                                      <div id="editServiceWizardMenuItemProperties">
                                        <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                     <h3>Contacts</h3>
                                      <div id="editServiceWizardMenuItemContacts">
                                        <div class="p-4 banner banner-warning"><h4>This functionality is not supported yet</h4></div>
                                      </div>
                                </div>
                                 <section class="my-3 h-350px">
                                    <pre class="ace-editor ace-relative w-100 h-100" id="wizardServiceEditor"></pre>
                                </section>

                            </div>

                            <footer class="mdc-dialog__actions modal-footer pr-4">
                                <button id="validateServiceWizard" name="validateService" type="button"
                                        class="mdc-button mdc-button--raised btn mdc-button--lg">
                                    <span class="mdc-button__label"><i class="mdc-tab__icon mdi mdi-check-all" aria-hidden="true"></i>Validate</span>
                                </button>
                                <button id="saveServiceWizard" name="saveService" type="button"
                                        class="mdc-button mdc-button--raised btn mdc-button--lg">
                                    <span class="mdc-button__label"><i class="mdc-tab__icon mdi mdi-content-save" aria-hidden="true"></i>Save</span>
                                </button>
                            </footer>
                        </div>
                    </div>
                    <div class="mdc-dialog__scrim"></div>
                </div>
                
                <div class="mdc-dialog modal" id="editServiceDialog" role="alertdialog"
                     aria-modal="true" aria-labelledby="edit-service-dialog-title" aria-describedby="dialog-content">
                    <div class="mdc-dialog__container w-100 modal-dialog">
                        <div class="mdc-dialog__surface mw-100 w-75 modal-content min-height-60">
                            <div class="mdc-dialog__content modal-body" id="edit-service-dialog-content">

                                <section class="d-flex h-750px" id="serviceEditorContainer">
                                    <div id="serviceTemplatesContainer" class="w-25 py-3 mr-2 jqueryui-accordion">

                                    </div>
                                    <pre class="ace-editor ace-relative w-100 h-100" id="serviceEditor"></pre>
                                </section>
                            </div>

                            <footer class="mdc-dialog__actions modal-footer pr-4">
                                <button id="saveService" name="saveService" type="button"
                                        class="mdc-button mdc-button--raised btn mdc-button--lg">
                                    <span class="mdc-button__label"><i class="mdc-tab__icon mdi mdi-content-save"
                                                                       aria-hidden="true"></i>Save</span>
                                </button>
                            </footer>
                        </div>
                    </div>
                    <div class="mdc-dialog__scrim"></div>
                </div>

                <div class="mdc-dialog modal" id="viewEntityHistoryDialog" role="alertdialog"
                     aria-modal="true" aria-labelledby="view-entity-history-title" aria-describedby="dialog-content">
                    <div class="mdc-dialog__container w-100 modal-dialog">
                        <div class="mdc-dialog__surface mw-100 w-75 modal-content min-height-60">
                            <div class="mdc-dialog__content modal-body" id="view-entity-history-content">
                                <h3>History</h3>
                                <table id="entityHistoryTable"
                                       class="mdc-data-table__table table table-striped noborder">
                                    <thead>
                                    <tr class="mdc-data-table__header-row">
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ID</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader"
                                            scope="col">Date</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col"></th>
                                    </tr>
                                    </thead>
                                    <tbody class="mdc-data-table__content">
                                    </tbody>
                                </table>

                                <section class="d-flex h-450px">
                                    <pre class="ace-editor ace-relative w-100 h-100" id="entityHistoryEditor"></pre>
                                </section>
                            </div>
                        </div>
                    </div>
                    <div class="mdc-dialog__scrim"></div>
                </div>

                <div class="mdc-dialog modal" id="viewEntityChangelogDialog" role="alertdialog"
                     aria-modal="true" aria-labelledby="view-entity-changelog-title" aria-describedby="dialog-content">
                    <div class="mdc-dialog__container w-100 modal-dialog">
                        <div class="mdc-dialog__surface mw-100 w-75 modal-content min-height-60">
                            <div class="mdc-dialog__content modal-body" id="view-entity-changelog-content">
                                <h3>Changelog</h3>
                                <p>The following changes are recorded for this service definition:</p>
                                <section class="d-flex h-750px">
                                    <pre class="ace-editor ace-relative w-100 h-100" id="entityChangelogEditor"></pre>
                                </section>
                            </div>
                        </div>
                    </div>
                    <div class="mdc-dialog__scrim"></div>
                </div>

            </div>


            <div id="saml2metadataproviders-tab">
                <table id="saml2MetadataProvidersTable" class="mdc-data-table__table table table-striped noborder">
                    <thead>
                    <tr class="mdc-data-table__header-row">
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ID</th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Service</th>
                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">URL</th>
                    </tr>
                    </thead>
                    <tbody class="mdc-data-table__content">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    </span>
</body>
</html>
