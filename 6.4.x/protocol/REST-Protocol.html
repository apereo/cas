<!DOCTYPE html>
<html>

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="CAS - Enterprise Single Sign-On for the Web" />
  <meta name="keywords" content="authentication, login, cas, central authentication service, web, java, protocol, thymeleaf,
                   open source, boot, spring, authorization, google, facebook, twitter, higher-ed, enterprise,
                   access management, single signon, sso, RBAC, ABAC, attributes, SAML, OpenID, openid connect,
                   JWT, ADFS" />
  <meta name="robots" content="index,follow" />

  
  

      
    


  

  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-83384532-2', 'auto');
    ga('send', 'pageview');

  </script>

  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.15.3/css/all.css" />
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

  <link rel="stylesheet" type="text/css" media="screen" href="../../stylesheets/stylesheet.css">
  <link rel="stylesheet" type="text/css" media="print" href="../../stylesheets/print.css">
  
  <link href='//fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet'>
  <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet'>
  <link href="//fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="//cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">
  
  <title>CAS - CAS REST Protocol</title>

</head>

<body>
  <!-- HEADER -->
  <header class="hidden-sm-down">
    <div class="container">
      <div class="row">
        <div class="col-xs-4 col-md-2">
          <a href="../../index.html">
            <img class="undecorated" src="../../images/cas_logo.png" />
          </a>
        </div>
        <div class="col-xs-8 col-md-6">
          <h1>Enterprise Single Sign-On for All</h1>
        </div>
        <div class="hidden-sm-down col-md-4">
          <a id="forkme_banner" href="https://github.com/apereo/cas">View on GitHub</a>
        </div>

      </div>
    </div>
  </header>

  <!-- NAVBAR -->

  <nav class="navbar navbar-expand-md navbar-dark bg-primary bg-dark">
    <div class="container">
      <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
        data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="navbar-collapse collapse" id="navbarsExample04">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active"><a href="../../index.html" class="zoom nav-link">Home</a></li>
          <li class="nav-item"><a href="https://github.com/apereo/cas/releases" class="zoom nav-link">Releases</a></li>
          <li class="nav-item"><a href="../../Support.html" class="zoom nav-link">Support</a></li>
          <li class="nav-item"><a href="../../Mailing-Lists.html" class="zoom nav-link">Mailing Lists</a></li>
          <li class="nav-item">
            <a class="zoom nav-link" href="../../Demos.html">Demos</a>
          </li>
          <li class="nav-item dropdown">
            <a class="zoom nav-link dropdown-toggle mr-md-2" href="#" id="cas-versions" data-bs-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">Versions</a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="cas-versions">
              
              
              <a class="dropdown-item" href="/cas/development/">Development</a>
              
              
              
              <a class="dropdown-item" href="/cas/6.5.x/">v6.5.x</a>
              
              
              
              <a class="dropdown-item" href="/cas/6.4.x/">v6.4.x</a>
              
              
              
              <a class="dropdown-item" href="/cas/6.3.x/">v6.3.x</a>
              
              
              
              <a class="dropdown-item" href="/cas/6.2.x/">v6.2.x</a>
              
              
              
              <a class="dropdown-item" href="/cas/6.1.x/">v6.1.x</a>
              
              
              
              <a class="dropdown-item" href="/cas/6.0.x/">v6.0.x</a>
              
              

            </div>
          </li>
          <li class="nav-item"><a href="https://apereo.github.io" target="_blank" class="zoom nav-link">Blog</a></li>
        </ul>

      </div>

    </div>
  </nav>



  <div class="container-fluid">
    <div class="row flex-xl-nowrap">
      <div class="col-12 col-md-3 col-xl-2 docs-sidebar pb-5" id="sidebar"></div>


      <div class="d-none d-xl-block col-xl-2 docs-toc">
    <div id="pageContents">
        <ul class="section-nav"></ul>
    </div>
</div>


      <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 cas-docs-content" role="main">
        <form class="mb-3">
          <label for="searchField" class="sr-only">Search</label>
          <div class="input-group">
            <input type="text" class="form-control" id="searchField" placeholder="Search" title="At least 3 characters"
              aria-label="Search" />
          </div>
        </form>

        

        <section>
          <nav id="docsNavBar">
            <span id="toolbarIcons"></span>
          </nav>

          <div id="cas-docs-container">
            
<h1 id="rest-protocol">REST Protocol</h1>

<p>The REST protocol allows one to model applications as users, programmatically acquiring
service tickets to authenticate to other applications. This means that other applications would be able
to use a CAS client  to accept Service Tickets rather than to rely upon another technology such as
client SSL certificates for application-to-application authentication of requests. This is achieved
by exposing a way to REST-fully obtain a Ticket Granting Ticket and then use that to obtain a Service Ticket.</p>

<div class="alert alert-warning"><strong>Usage Warning!</strong><p>The REST endpoint may
 become a tremendously convenient target for brute force dictionary attacks on CAS server. Consider
 enabling throttling support to ensure brute force attacks are prevented upon authentication failures.</p></div>

<h2 id="configuration">Configuration</h2>

<p>Support is enabled by including the following to the overlay:</p>

<script type="text/javascript">

function tabClicked(idx) {
  var radius = "0px 5px 5px 5px";
  if (idx != 0) {
    radius = "5px 5px 5px 5px";
  }
  $(".tab-pane .highlight>pre.highlight").css("border-radius", radius);
  switch (idx) {
    case 0:
      $("div #mavenorgapereocascasserversupportreports").addClass("active").addClass("show");
      $("div #gradleorgapereocascasserversupportreports").removeClass("active").removeClass("show");
      $("div #bomorgapereocascasserversupportreports").removeClass("active").removeClass("show");
      break;
    case 1:
      $("div #gradleorgapereocascasserversupportreports").addClass("active").addClass("show");
      $("div #mavenorgapereocascasserversupportreports").removeClass("active").removeClass("show");
      $("div #bomorgapereocascasserversupportreports").removeClass("active").removeClass("show");
      break;
    case 2:
      $("div #bomorgapereocascasserversupportreports").addClass("active").addClass("show");
      $("div #gradleorgapereocascasserversupportreports").removeClass("active").removeClass("show");
      $("div #mavenorgapereocascasserversupportreports").removeClass("active").removeClass("show");
      break;
  }
}

</script>

<div style="display: block">

<ul class="nav nav-pills">
  <li class="nav-item"><a class="nav-link" onclick="javascript:tabClicked(0)" data-bs-toggle="tab" href="#mavenorgapereocascasserversupportrest">Maven</a></li>
  <li class="nav-item"><a class="nav-link active" onclick="javascript:tabClicked(1)" data-bs-toggle="tab" href="#gradleorgapereocascasserversupportrest">Gradle</a></li>

  
    <li class="nav-item"><a class="nav-link" onclick="javascript:tabClicked(2)" data-bs-toggle="tab" href="#bomorgapereocascasserversupportrest">BOM</a></li>
  

  <li role="presentation" class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" onclick="javascript:tabClicked(3)" data-bs-toggle="dropdown" href="#" role="button">Resources
      <span class="caret"></span>
    </a>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="javascript:generateOverlay('cas-server-support-rest', 'cas-overlay');">Generate CAS Server WAR Overlay</a>
      <a class="dropdown-item" href="javascript:generateOverlay('cas-server-support-rest', 'cas-mgmt-overlay');">Generate CAS Management Server WAR Overlay</a>
      <a class="dropdown-item" href="javascript:generateOverlay('cas-server-support-rest', 'cas-config-server-overlay');">Generate CAS Configuration Server WAR Overlay</a>
      <a class="dropdown-item" href="javascript:generateOverlay('', 'cas-discovery-server-overlay');">Generate CAS Discovery Server WAR Overlay</a>
      <a class="dropdown-item" href="javascript:generateOverlay('', 'cas-bootadmin-server-overlay');">Generate CAS Spring Boot Admin Server WAR Overlay</a>
    </div>
  </li>
</ul>


<div class="cas-module-tabs tab-content clearfix">



  <div class="tab-pane fade in" id="mavenorgapereocascasserversupportrest">
    

    <span>
      
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apereo.cas<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>cas-server-support-rest<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>${cas.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>


    </span>
  
  </div>


  <div class="tab-pane fade in active show" id="gradleorgapereocascasserversupportrest">
  
  <span>
    
<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">implementation</span> <span class="s2">"org.apereo.cas:cas-server-support-rest:${project.'cas.version'}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>


  </span>

  </div>


  <div class="tab-pane fade in" id="bomorgapereocascasserversupportrest">
  
  <span>
    
<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="n">dependencyManagement</span> <span class="o">{</span>
  <span class="n">imports</span> <span class="o">{</span>
    <span class="n">mavenBom</span> <span class="s2">"org.apereo.cas:cas-server-support-bom:${project.'cas.version'}"</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>  
  <span class="n">implementation</span> <span class="s2">"org.apereo.cas:cas-server-support-rest"</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>


  </span>
  
  </div>

</div>

</div>

<h2 id="multiple-credentials">Multiple Credentials</h2>

<p>The CAS REST API machinery has the ability to use multiple <em>credential extractors</em> that are
tasked with analyzing the request body in order to fetch credentials and pass them
along. While by default expected credentials that may be extracted are based on
username/password, additional modules automatically lend themselves into this design and inject
their opinionated credential extractor into the REST engine automatically so that the final
collection of credentials may be used for issuing tickets, etc.</p>

<p>This indicates that you may pass along multiple credentials to the REST protocol in
the request body and so long as CAS is configured to understand and extract those
credentials and the authentication machinery is configured to also execute and
validate those credentials. For instance, you may deliver a use case where two sets
of credentials in form of username/password and OTP are provided to the REST protocol
and CAS would then attempt to authenticate both credentials and produce a response
on a successful validation, assuming that authentication strategies for
username/password and OTP are properly configured in CAS.</p>

<h2 id="ticket-granting-ticket">Ticket Granting Ticket</h2>

<p>Please see <a href="REST-Protocol-Request-TicketGrantingTicket.html">this guide</a>.</p>

<h2 id="authenticate-credentials">Authenticate Credentials</h2>

<p>Please see <a href="REST-Protocol-CredentialAuthentication.html">this guide</a>.</p>

<h2 id="request-a-service-ticket">Request a Service Ticket</h2>

<p>Please see <a href="REST-Protocol-Request-ServiceTicket.html">this guide</a>.</p>

<h2 id="validate-service-ticket">Validate Service Ticket</h2>

<p>Please see <a href="REST-Protocol-ServiceTicket-Validation.html">this guide</a>.</p>

<h2 id="logout">Logout</h2>

<p>Please see <a href="REST-Protocol-Logout.html">this guide</a>.</p>

<h2 id="ticket-status">Ticket Status</h2>

<p>Please see <a href="REST-Protocol-TicketStatus.html">this guide</a>.</p>

<h2 id="add-service">Add Service</h2>

<p>Please see <a href="REST-Protocol-Create-Service.html">this guide</a>.</p>

<h2 id="cas-rest-clients">CAS REST Clients</h2>

<p>In order to interact with the CAS REST API, a REST client must be used to submit credentials,
receive tickets and validate them. The following Java REST client is available
by <a href="https://github.com/pac4j/pac4j">pac4j</a>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="kt">var</span> <span class="n">casUrlPrefix</span> <span class="o">=</span> <span class="s">"http://localhost:8080/cas"</span><span class="o">;</span>
<span class="kt">var</span> <span class="n">username</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
<span class="kt">var</span> <span class="n">password</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
<span class="kt">var</span> <span class="n">serviceUrl</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">2</span><span class="o">];</span>
<span class="kt">var</span> <span class="n">casConfiguration</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CasConfiguration</span><span class="o">(</span><span class="n">casUrlPrefix</span><span class="o">);</span>
<span class="kt">var</span> <span class="n">authenticator</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CasRestAuthenticator</span><span class="o">(</span><span class="n">casConfiguration</span><span class="o">);</span>
<span class="kt">var</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CasRestFormClient</span><span class="o">(</span><span class="n">casConfiguration</span><span class="o">,</span><span class="s">"username"</span><span class="o">,</span><span class="s">"password"</span><span class="o">);</span>
<span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MockHttpServletRequest</span><span class="o">();</span>
<span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MockHttpServletResponse</span><span class="o">();</span>

<span class="kt">var</span> <span class="n">webContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JEEContext</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
<span class="n">casConfiguration</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">webContext</span><span class="o">);</span>

<span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UsernamePasswordCredentials</span><span class="o">(</span><span class="n">username</span><span class="o">,</span><span class="n">password</span><span class="o">,</span><span class="s">"testclient"</span><span class="o">);</span>
<span class="kt">var</span> <span class="n">restAuthenticator</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CasRestAuthenticator</span><span class="o">(</span><span class="n">casConfiguration</span><span class="o">);</span>

<span class="n">restAuthenticator</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">credentials</span><span class="o">,</span> <span class="n">webContext</span><span class="o">);</span>
<span class="kt">var</span> <span class="n">profile</span> <span class="o">=</span> <span class="o">(</span><span class="nc">CasRestProfile</span><span class="o">)</span> <span class="n">credentials</span><span class="o">.</span><span class="na">getUserProfile</span><span class="o">();</span>
<span class="kt">var</span> <span class="n">casCredentials</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">requestServiceTicket</span><span class="o">(</span><span class="n">serviceUrl</span><span class="o">,</span> <span class="n">profile</span><span class="o">,</span> <span class="n">webContext</span><span class="o">);</span>
<span class="kt">var</span> <span class="n">casProfile</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">validateServiceTicket</span><span class="o">(</span><span class="n">serviceUrl</span><span class="o">,</span> <span class="n">casCredentials</span><span class="o">,</span> <span class="n">webContext</span><span class="o">);</span>

<span class="kt">var</span> <span class="n">attributes</span> <span class="o">=</span> <span class="n">casProfile</span><span class="o">.</span><span class="na">getAttributes</span><span class="o">();</span>
<span class="kt">var</span> <span class="n">mapEntries</span> <span class="o">=</span> <span class="n">attributes</span><span class="o">.</span><span class="na">entrySet</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">var</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">mapEntries</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">()</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
<span class="o">}</span>
<span class="n">client</span><span class="o">.</span><span class="na">destroyTicketGrantingTicket</span><span class="o">(</span><span class="n">profile</span><span class="o">,</span> <span class="n">webContext</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="throttling">Throttling</h2>

<p>To understand how to throttling works in CAS, 
please review <a href="../authentication/Configuring-Authentication-Throttling.html">the available options</a>. 
By default, throttling REST requests is turned off. 
To activate this functionality, you will need to choose an appropriate throttler and activate it by declaring the relevant module. 
The same throttling mechanism that handles the usual CAS server endpoints for authentication
and ticket validation, etc is then activated for the REST endpoints that are supported for throttling.</p>

<h2 id="swagger-api">Swagger API</h2>

<p>CAS REST API may be automatically integrated with Swagger. <a href="../integration/Swagger-Integration.html">See this guide</a> for more info.</p>

          </div>
        </section>
      </main>
    </div>
  </div>


  <footer>
    <div class="container">
      CAS is supported by the <a href="http://www.apereo.org/">Apereo Foundation</a>.
    </div>
  </footer>

  <script>
    var pageSection = 'Protocols';
  </script>

  <script src="//code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

  <script src="//cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

  <script src="../../javascripts/URI.js"></script>
  <script src="../../javascripts/main.js"></script>

  <script type="text/javascript" src="//cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript" src="//cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  
  <script type="text/javascript">
    new ClipboardJS('.copy-button');

    let tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    let tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl)
    })

    docsearch({
      apiKey: 'e574b72c1301f8a28e49ec9644096c79',
      indexName: 'apereo',
      inputSelector: '#searchField',
      algoliaOptions: { 'facetFilters': ["version: 6.4.x"] },
      debug: false // Set debug to true if you want to inspect the dropdown
    });
  </script>
</body>

</html>
