<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="CAS - Enterprise Single Sign-On for the Web"/>
    <meta name="keywords" content="authentication, login, cas, central authentication service, web, java, protocol, thymeleaf,
                   open source, boot, spring, authorization, google, facebook, twitter, higher-ed, enterprise,
                   access management, single sign-on, sso, RBAC, ABAC, attributes, SAML, OpenID, openid connect,
                   JWT, ADFS"/>
    <meta name="robots" content="index,follow"/>

    
    

    







    

    <script>
        ((i, s, o, g, r, a, m) => {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-83384532-2', 'auto');
        ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css" />
    
    
    <link rel="stylesheet" type="text/css" media="screen" href='/cas/stylesheets/stylesheet.css'>
    <link rel="stylesheet" type="text/css" media="print" href='/cas/stylesheets/print.css'>

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">

    <title>CAS - OAuth Authentication</title>

</head>

<body>
    <!-- HEADER -->
    <header class="hidden-sm-down">
        <div class="container">
            <div class="row">
                <div class="col-xs-4 col-md-2">
                    <a href="../../index.html">
                        <img class="undecorated" src="/cas/images/cas_logo.png"/>
                    </a>
                </div>
                <div class="col-xs-8 col-md-6">
                    <h1>Enterprise Identity for All Earthlings and Beyond<p><sub>Identity, Single Sign-On and Access Management</sub></p></h1>
                </div>
                <div class="hidden-sm-down col-md-4">
                    <a id="forkme_banner" href="https://github.com/apereo/cas">View on GitHub</a>
                </div>

            </div>
        </div>
    </header>

    <!-- NAVBAR -->

    <nav class="navbar navbar-expand-md navbar-dark bg-primary bg-dark">
        
        <button onclick="navigateSidebar()" id="sidebarNavButton">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        
        <div class="container">
<!--            <button id="navigationNavButton" class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"-->
<!--                    data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"-->
<!--                    aria-label="Toggle navigation">-->
<!--                <span class="navbar-toggler-icon"></span>-->
<!--            </button>-->

            <div class="navbar-collapse collapse" id="navbarsExample04">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active"><a href="../../index.html" class="zoom nav-link">Home</a></li>
                    <li class="nav-item"><a href="https://github.com/apereo/cas/releases" class="zoom nav-link">Releases</a></li>
                    <li class="nav-item"><a href="../../Support.html" class="zoom nav-link">Support</a></li>
                    <li class="nav-item"><a href="../../Mailing-Lists.html" class="zoom nav-link">Mailing Lists</a></li>
                    <li class="nav-item dropdown">
                        <a class="zoom nav-link dropdown-toggle mr-md-2" href="#" id="cas-versions" data-bs-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">Versions</a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="cas-versions">
                            
                            
                            <a class="dropdown-item" href="/cas/development/">Development</a>
                            
                            
                            
                            <a class="dropdown-item" href="/cas/7.1.x/">v7.1.x</a>
                            
                            
                            
                            <a class="dropdown-item" href="/cas/7.0.x/">v7.0.x</a>
                            
                            

                        </div>
                    </li>
                    <li class="nav-item"><a href="https://apereo.github.io" target="_blank" class="zoom nav-link">Blog</a></li>
                </ul>

            </div>

        </div>
    </nav>


    <div class="container-fluid">
        <div class="row flex-xl-nowrap">

            
                <div class="col-12 col-md-3 col-xl-2 docs-sidebar pb-5" id="sidebar"></div>

                <div class="d-none d-xl-block col-xl-2 docs-toc">
    <div id="pageContents">
        <ul class="section-nav"></ul>
    </div>
</div>

            

            <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 cas-docs-content" role="main">
                
                

                <section>
                    
                    <nav id="docsNavBar">
                        <span id="toolbarIcons"></span>
                    </nav>
                    

                    <div id="cas-docs-container">
                        
<h1 id="token-introspection---oauth-authentication">Token Introspection - OAuth Authentication</h1>

<p>The contents of access or refresh tokens issued by CAS are typically opaque to clients (though access tokens may also be conditionally 
<a href="OAuth-Authentication-JWT-AccessTokens.html">issued as JWTs</a>). This means that the client does not need to know anything about the
content or structure of the token itself, if there is any. However, there is still a large amount of metadata that may be attached to a
token, such as its current validity, approved scopes, and information about the context in which the token was issued. This specification defines 
a <a href="https://tools.ietf.org/html/rfc7662">protocol</a> that allows authorized protected resources to query the authorization server to determine 
the set of metadata for a given token that was presented to them by an OAuth 2.0 client. This metadata includes whether or not the token 
is currently active (or if it has expired or otherwise been revoked), what rights of access the token carries, and the authorization context 
in which the token was granted (including who authorized the token and which client it was issued to). Token introspection allows a protected resource to
query this information regardless of whether or not it is carried in the token itself, allowing this method to be used along with or
independently of structured token values.</p>

<p>The introspection endpoint expects HTTP basic authentication with OAuth2 service <code class="language-plaintext highlighter-rouge">client_id</code> and <code class="language-plaintext highlighter-rouge">client_secret</code>. The following is 
an example response to an introspection request for a token:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"l2345678"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read write manage"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Z5O3upPC88QrAjx00dis"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://protected.example.net/resource"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cas.example.com/oidc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1419356238</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1419350238</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="jwt-responses-for-token-introspection">JWT Responses for Token Introspection</h2>

<p>The introspection response is a plain JSON object. However, there are use cases where the resource server 
requires stronger assurance that the CAS server issued the token introspection response for an 
access token, including cases where the CAS server assumes liability for the content of the token introspection response. In such use cases it 
may be useful or even required to return a signed JWT as the introspection response. <a href="https://www.ietf.org/id/draft-ietf-oauth-jwt-introspection-response-12.html">This specification</a> 
extends the token introspection endpoint with the capability to return responses as JWTs.</p>

<p>A token introspection request may ask for a JWT introspection response by sending an introspection request 
with an <code class="language-plaintext highlighter-rouge">Accept</code> HTTP header field set to <code class="language-plaintext highlighter-rouge">application/token-introspection+jwt</code>. The introspection endpoint responds with a JWT, 
setting the <code class="language-plaintext highlighter-rouge">Content-Type</code> HTTP header field to <code class="language-plaintext highlighter-rouge">application/token-introspection+jwt</code> and the JWT <code class="language-plaintext highlighter-rouge">typ</code> (“type”) header 
parameter to <code class="language-plaintext highlighter-rouge">token-introspection+jwt</code>.</p>

<p>The example response JWT payload contains the following JSON document:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"iss"</span><span class="p">:</span><span class="s2">"https://cas.example.com/oidc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"aud"</span><span class="p">:</span><span class="s2">"https://rs.example.com/resource"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iat"</span><span class="p">:</span><span class="mi">1514797892</span><span class="p">,</span><span class="w">
    </span><span class="nl">"token_introspection"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iss"</span><span class="p">:</span><span class="s2">"https://as.example.com/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"aud"</span><span class="p">:</span><span class="s2">"https://rs.example.com/resource"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iat"</span><span class="p">:</span><span class="mi">1514797822</span><span class="p">,</span><span class="w">
        </span><span class="nl">"exp"</span><span class="p">:</span><span class="mi">1514797942</span><span class="p">,</span><span class="w">
        </span><span class="nl">"client_id"</span><span class="p">:</span><span class="s2">"paiB2goo0a"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"scope"</span><span class="p">:</span><span class="s2">"read write dolphin"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sub"</span><span class="p">:</span><span class="s2">"Z5O3upPC88QrAjx00dis"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"birthdate"</span><span class="p">:</span><span class="s2">"1982-02-01"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"given_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"family_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"jti"</span><span class="p">:</span><span class="s2">"t1FoCCaZd4Xv4ORJUWVUeTZfsKhW30CQCrWDDjwXy6w"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>Signing and encryption algorithms used to process JWT responses for token introspection can be defined on a <a href="OAuth-Authentication-Clients.html">per-client basis</a>.</p>

                    </div>
                </section>
            </main>
        </div>
    </div>


    <footer>
        <div class="container">
            CAS is supported by the <a href="https://www.apereo.org/">Apereo Foundation</a>.
        </div>
    </footer>
    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/tether@2.0.0/dist/js/tether.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>

    <script src='/cas/javascripts/URI.js'></script>
    <script src='/cas/javascripts/main.js'></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js"></script>

    <script>
        let pageSection = 'Authentication';
        let siteUrl = '';
        let basePath = '/cas';

        
    </script>
</body>

</html>
