<project name="casLocalPlugins" default="build" basedir=".">
	<path id="buildLibs">
		<fileset dir="lib"/>
		<fileset dir="../webapp/WEB-INF/lib"/>
	</path>
	<target name="build">
		<mkdir dir="build"/>
		<mkdir dir="build/META-INF"/>
		<javac srcdir="src" destdir="build" debug="on">
			<classpath refid="buildLibs"/>
		</javac>
	</target>
	<target name="jar" depends="build">
		<mkdir dir="target"/>
		<jar jarfile="target/localPlugins.jar" basedir="build"/>
		<echo>
**********************************************************
* Make sure you edit                                     *
* ../webapp/WEB-INF/deployerConfigContext.xml to include *
* your plugins before you build the "war" target!        *
**********************************************************</echo>
	</target>
	<target name="war" depends="jar">
		<mkdir dir="target/webapp"/>
		<copy todir="target/webapp">
			<fileset dir="../webapp"/>
		</copy>
		<copy todir="target/webapp/WEB-INF/lib">
			<fileset dir="../lib/war"/>
		</copy>
		<copy todir="target/webapp/WEB-INF/lib">
			<fileset dir="lib" includes="**/*.jar"/>
		</copy>
		<copy file="target/localPlugins.jar" tofile="target/webapp/WEB-INF/lib/localPlugins.jar"/>
		<jar jarfile="target/cas.war" basedir="target/webapp"/>
	</target>
	<target name="doc">
		<javadoc sourcepath="src" destdir="docs">
			<classpath refid="buildLibs"/>
			<package name="*"/>
		</javadoc>
	</target>
	<target name="clean">
		<delete dir="build"/>
		<delete dir="docs"/>
		<delete dir="target"/>
	</target>
</project>
